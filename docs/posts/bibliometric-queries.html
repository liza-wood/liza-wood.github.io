<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Liza Wood">
<meta name="dcterms.date" content="2025-02-04">

<title>Part 1. Querying Bibliometric APIs and wrangling output – Liza Wood</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Liza Wood</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../workshops.html"> 
<span class="menu-text">Workshops / Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cv.html"> 
<span class="menu-text">CV</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/liza-wood/"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/wood__liza"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting started</a>
  <ul class="collapse">
  <li><a href="#api-keys" id="toc-api-keys" class="nav-link" data-scroll-target="#api-keys">API Keys</a></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages">Packages</a></li>
  </ul></li>
  <li><a href="#web-of-science-clarivate" id="toc-web-of-science-clarivate" class="nav-link" data-scroll-target="#web-of-science-clarivate">Web of Science / Clarivate</a>
  <ul class="collapse">
  <li><a href="#query-a-phrase" id="toc-query-a-phrase" class="nav-link" data-scroll-target="#query-a-phrase">Query a phrase</a></li>
  <li><a href="#query-dois" id="toc-query-dois" class="nav-link" data-scroll-target="#query-dois">Query DOIs</a></li>
  </ul></li>
  <li><a href="#scopus" id="toc-scopus" class="nav-link" data-scroll-target="#scopus">Scopus</a>
  <ul class="collapse">
  <li><a href="#query-a-phrase-1" id="toc-query-a-phrase-1" class="nav-link" data-scroll-target="#query-a-phrase-1">Query a phrase</a></li>
  <li><a href="#query-dois-1" id="toc-query-dois-1" class="nav-link" data-scroll-target="#query-dois-1">Query DOIs</a></li>
  </ul></li>
  <li><a href="#openalex" id="toc-openalex" class="nav-link" data-scroll-target="#openalex">OpenAlex</a>
  <ul class="collapse">
  <li><a href="#query-by-doi" id="toc-query-by-doi" class="nav-link" data-scroll-target="#query-by-doi">Query by DOI</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Part 1. Querying Bibliometric APIs and wrangling output</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Liza Wood </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 4, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Bibliometric data, particularly collected via APIs, can help make literature reviews (and our understanding of a literature) more streamlined, reproducible, and powerful.</p>
<ol type="1">
<li>Streamlined: By starting your queries and/or data extraction right from the API, there is no more exporting files from search pages or copying a pasting information from journals’ metadata. Once you get a hand of the API, this will help smooth out the process and allow you to quickly work with large databases without any manual steps.<br>
</li>
<li>Reproducible: Relatedly, reducing manual steps in the literature review process (and instead embedding those steps into code) makes your research process more transparent and reproducible. Rather than providing the search terms, having your query explicitly written into your code will help other researchers understand exactly what you searched for, how you later filtered the data, and what details you extract and clean.</li>
<li>Powerful: There is a lot of data available in bibliometric databases that are hard to extract from the user interface. With the API, you can leverage data such as references, impact metrics, author affiliations, etc. more easily than if you were working with the user interface.</li>
</ol>
<p>This tutorial is Part 1 of a three-part series, which focuses on the basics of API use and accomplishing the first two benefits: streamlined and reproducible. It will walk through using various APIs – Web of Science, Scopus, and OpenAlex – to query bibliometric databases and clean up the outputs to make them usable.</p>
</section>
<section id="getting-started" class="level1">
<h1>Getting started</h1>
<section id="api-keys" class="level2">
<h2 class="anchored" data-anchor-id="api-keys">API Keys</h2>
<p>First, we’ll need API keys for the proprietary databases: Web of Science (Clarivate) and Scopus (Elsevier). These are typically available for free if you are affiliated with a university that subscribes to these publishers, but it does require applying. For Web of Science, they have several API products and the main one we use is the <a href="https://developer.clarivate.com/apis/wos">Web of Science API Expanded</a>. Scopus has fewer options and you can apply here through the <a href="https://dev.elsevier.com/">Elsevier Developer Portal</a></p>
<p>When you get these keys, there is a matter of storage. These keys are yours, so you should keep them stored separately (and hidden/ignored) in your R workflow and source them in so that they are not hard coding into code that you may share or store publicly in GitHub. Some may think this is chaos to just keep them outside, but…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">'~/Documents/Davis/R-Projects/wos_key.R'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">'~/Documents/Davis/R-Projects/scopus_key.R'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<p>Second, we’re going to rely on four packages for this tutorial, below. I’ll note that there are packages that act as wrappers around bibliometric APIs, such as <a href="https://github.com/cran/wosr">wosr</a>. However, these packages are not always maintained and can bug, so here we are going to be interfacing directly with the APIs, which means we only only need a few packages, namely <code>httr2</code> and <code>jsonlite</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(wosr)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="web-of-science-clarivate" class="level1">
<h1>Web of Science / Clarivate</h1>
<p>First we will set our base URL of the API, which will will append our search queries to.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>base_url <span class="ot">=</span> <span class="st">'https://wos-api.clarivate.com/api/wos'</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">url_parse</span>(base_url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="query-a-phrase" class="level2">
<h2 class="anchored" data-anchor-id="query-a-phrase">Query a phrase</h2>
<p>Now first, let’s identify what we want to query. We will go with something simple:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> <span class="st">"niche innovation"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>However, it is good to know that the default in WoS is that it lemmatizes words unless you embed the word in quotes. So we will embed this query in quotes and then write our query so that it searches for these exact words in either the title, author keywords, or abstract. For more guidance on field tags, visit the <a href="https://webofscience.help.clarivate.com/en-us/Content/wos-core-collection/woscc-search-field-tags.htm">WoS documentation</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">'"'</span>, query,<span class="st">'"'</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">'(TI=('</span>,query,<span class="st">') OR AK=('</span>,query,<span class="st">') OR AB=('</span>,query,<span class="st">'))'</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>query</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "(TI=(\"niche innovation\") OR AK=(\"niche innovation\") OR AB=(\"niche innovation\"))"</code></pre>
</div>
</div>
<p>Now to build the query out, we can specify other elements of the API query into a list that is appended to the url.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create URL query</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>url<span class="sc">$</span>query <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">firstRecord =</span> <span class="dv">1</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">optionView =</span> <span class="st">'FR'</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">databaseId =</span> <span class="st">'WOS'</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lang=</span><span class="st">'en'</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">publishTimeSpan=</span><span class="st">'1900-01-01+2023-12-31'</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cursor =</span> <span class="st">"*"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">usrQuery =</span> query)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>built_url <span class="ot">=</span> <span class="fu">url_build</span>(url)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>qurl <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(built_url,<span class="st">"%2A"</span>,<span class="st">"*"</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>js <span class="ot">&lt;-</span> <span class="fu">request</span>(qurl) <span class="sc">%&gt;%</span>  httr2<span class="sc">::</span><span class="fu">req_headers</span>(<span class="st">`</span><span class="at">X-ApiKey</span><span class="st">`</span> <span class="ot">=</span> wos_key) <span class="sc">%&gt;%</span> </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>() <span class="sc">%&gt;%</span>  <span class="fu">resp_body_string</span>() <span class="sc">%&gt;%</span>  jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>()</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>js<span class="sc">$</span>QueryResult<span class="sc">$</span>RecordsFound</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 71</code></pre>
</div>
</div>
<p>So there are 71 articles in the database. BUT, there are limited to how many can be returned at a time. Without specifying any return, we get 10.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>records <span class="ot">&lt;-</span> js<span class="sc">$</span>Data<span class="sc">$</span>Records<span class="sc">$</span>records<span class="sc">$</span>REC</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(records)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
<p>So we need to specify a count, but it cannot be so high, a max of 25. Still, we’ll need to deal wit pagination. But, the clarivate API doesn’t seem to provide a “next” style cursor, instead, it has a silly feature where you say ‘I’d like to start the next result at the 100th item’, queries return 100 at a time, so basically, the janky way I solve this is by iterating and adding 100 to first record index each query</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>count <span class="ot">=</span> <span class="dv">25</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>total_records <span class="ot">&lt;-</span> js<span class="sc">$</span>QueryResult<span class="sc">$</span>RecordsFound</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>num_queries <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(total_records<span class="sc">/</span>count)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>wos <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>num_queries){</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(<span class="fl">0.5</span>) <span class="co"># Need to slow it down a little</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  url<span class="sc">$</span>query <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">firstRecord =</span> (i<span class="sc">*</span>count)<span class="sc">-</span>(count<span class="dv">-1</span>),</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">optionView =</span> <span class="st">'FR'</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">databaseId =</span> <span class="st">'WOS'</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lang=</span><span class="st">'en'</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">count =</span> count,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">publishTimeSpan=</span><span class="st">'1900-01-01+2023-12-31'</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cursor =</span> <span class="st">"*"</span>,</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">usrQuery =</span> query)</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  built_url <span class="ot">=</span> <span class="fu">url_build</span>(url)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  qurl <span class="ot">&lt;-</span> built_url</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  js <span class="ot">&lt;-</span> <span class="fu">request</span>(qurl) <span class="sc">|&gt;</span> httr2<span class="sc">::</span><span class="fu">req_headers</span>(<span class="st">`</span><span class="at">X-ApiKey</span><span class="st">`</span> <span class="ot">=</span> wos_key) <span class="sc">|&gt;</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> <span class="fu">resp_body_string</span>() <span class="sc">|&gt;</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>()</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  wos[[i]] <span class="ot">&lt;-</span> js<span class="sc">$</span>Data<span class="sc">$</span>Records<span class="sc">$</span>records<span class="sc">$</span>REC</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we have all of the outputs from the database, but they are hard to manage, as there are dataframes of static and dynamic data nested together</p>
<p>APIs are powerful, but it can be intimidating to manage your API query and wrangle the data that comes out (typically as a JSON).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">unlist</span>(<span class="fu">lapply</span>(wos, nrow)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 71</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#head(wos[[1]])</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>So let’s unfurl these by writing a few functions.</p>
<p>First we will get out its IDs from the dynamic data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>extractWOS_IDs <span class="ot">&lt;-</span> <span class="cf">function</span>(x,<span class="at">value.var =</span> <span class="cn">NULL</span>){</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">class</span>(x)<span class="sc">==</span><span class="st">'data.frame'</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  {y <span class="ot">=</span> <span class="fu">data.table</span>(x)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="at">y =</span> <span class="fu">dcast</span>(y,.<span class="sc">~</span>type,<span class="at">value.var =</span> value.var,<span class="at">fun.aggregate =</span> <span class="cf">function</span>(x) <span class="fu">paste</span>(x, <span class="at">collapse=</span><span class="st">";;"</span>)))}</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">class</span>(x)<span class="sc">==</span><span class="st">'list'</span>){</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>   y <span class="ot">=</span> <span class="fu">as.data.frame</span>(x)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">return</span>(y)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>id_list <span class="ot">&lt;-</span> <span class="fu">lapply</span>(wos,<span class="cf">function</span>(st) {</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  st_list <span class="ot">&lt;-</span> <span class="fu">lapply</span>(st<span class="sc">$</span>dynamic_data<span class="sc">$</span>cluster_related<span class="sc">$</span>identifiers<span class="sc">$</span>identifier,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>                    extractWOS_IDs,<span class="at">value.var =</span> <span class="st">'value'</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  st_id <span class="ot">=</span> <span class="fu">rbindlist</span>(st_list,<span class="at">fill =</span> T,<span class="at">use.names =</span> T)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  st_id<span class="sc">$</span>UID <span class="ot">&lt;-</span> st<span class="sc">$</span>UID</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  st_id</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>wos_ids <span class="ot">&lt;-</span> <span class="fu">rbindlist</span>(id_list,<span class="at">fill =</span> T,<span class="at">use.names =</span> T)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>wos_ids <span class="ot">&lt;-</span> wos_ids[,<span class="fu">c</span>(<span class="st">'UID'</span>, <span class="st">'doi'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Also use this function to get titles</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### turns out the same function works for titles, just swap in 'content' for value.var</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>title_list <span class="ot">=</span> <span class="fu">lapply</span>(wos,<span class="cf">function</span>(st) {</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  st_title <span class="ot">=</span> <span class="fu">rbindlist</span>(<span class="fu">lapply</span>(st<span class="sc">$</span>static_data<span class="sc">$</span>summary<span class="sc">$</span>titles<span class="sc">$</span>title, </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                              extractWOS_IDs, <span class="at">value.var =</span> <span class="st">'content'</span>),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">fill =</span> T, <span class="at">use.names =</span> T)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  st_title<span class="sc">$</span>UID <span class="ot">&lt;-</span> st<span class="sc">$</span>UID</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  st_title})</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>wos_titles <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">rbindlist</span>(title_list,<span class="at">fill =</span> T,<span class="at">use.names =</span> T))</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>wos_titles <span class="ot">&lt;-</span> wos_titles[<span class="fu">c</span>(<span class="st">'UID'</span>, <span class="st">'item'</span>, <span class="st">'source'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then let’s get some additional data from the static data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Item type (Article, Review, etc.)</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>wos_item_type <span class="ot">=</span> <span class="fu">lapply</span>(wos, <span class="cf">function</span>(x)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sapply</span>(x<span class="sc">$</span>static_data<span class="sc">$</span>fullrecord_metadata<span class="sc">$</span>normalized_doctypes<span class="sc">$</span>doctype, </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>         <span class="cf">function</span>(y) y[[<span class="dv">1</span>]]))</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Abstract </span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>wos_abstract <span class="ot">=</span> <span class="fu">lapply</span>(wos, <span class="cf">function</span>(x) </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">$</span>static_data<span class="sc">$</span>fullrecord_metadata<span class="sc">$</span>abstracts<span class="sc">$</span>abstract<span class="sc">$</span>abstract_text)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>wos_abstract <span class="ot">=</span> <span class="fu">lapply</span>(wos_abstract, <span class="cf">function</span>(y) y[[<span class="st">'p'</span>]])</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Some of these break up into many segments, so let's collapse them</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(wos_abstract)){</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">typeof</span>(wos_abstract[[i]]) <span class="sc">==</span> <span class="st">"list"</span>){</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(wos_abstract[[i]])){</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>      wos_abstract[[i]][[j]] <span class="ot">&lt;-</span> <span class="fu">paste</span>(wos_abstract[[i]][[j]], <span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Publication year</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>wos_pub_year <span class="ot">=</span> <span class="fu">lapply</span>(wos, <span class="cf">function</span>(x) </span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sapply</span>(x<span class="sc">$</span>static_data<span class="sc">$</span>summary<span class="sc">$</span>pub_info<span class="sc">$</span>pubyear,</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>         <span class="cf">function</span>(y) y[[<span class="dv">1</span>]]))</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Keywords</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>wos_keywords <span class="ot">=</span> <span class="fu">lapply</span>(wos, <span class="cf">function</span>(x) </span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sapply</span>(x<span class="sc">$</span>static_data<span class="sc">$</span>fullrecord_metadata<span class="sc">$</span>keywords<span class="sc">$</span>keyword,</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>         <span class="cf">function</span>(y) <span class="fu">toupper</span>(<span class="fu">paste0</span>(<span class="fu">sort</span>(y), <span class="at">collapse =</span> <span class="st">";"</span>))))</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>wos_type <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">UID =</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(wos,<span class="cf">function</span>(x) x<span class="sc">$</span>UID)),</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>                       <span class="at">TYPE =</span> <span class="fu">unlist</span>(wos_item_type),</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>                       <span class="at">ABSTRACT =</span> <span class="fu">unlist</span>(wos_abstract),</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>                       <span class="at">KEYWORDS =</span> <span class="fu">unlist</span>(wos_keywords),</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>                       <span class="at">PUBYEAR =</span> <span class="fu">unlist</span>(wos_pub_year))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let’s combine them</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>wos_dt <span class="ot">&lt;-</span> <span class="fu">merge</span>(wos_ids, wos_titles, <span class="at">by =</span> <span class="st">'UID'</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>wos_dt <span class="ot">&lt;-</span> <span class="fu">merge</span>(wos_dt, wos_type, <span class="at">by =</span> <span class="st">'UID'</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(wos_dt)[<span class="fu">which</span>(<span class="fu">colnames</span>(wos_dt) <span class="sc">%in%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">c</span>(<span class="st">'item'</span>, <span class="st">'source'</span>))] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"title"</span>, <span class="st">'pub_name'</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(wos_dt) <span class="ot">&lt;-</span> <span class="fu">toupper</span>(<span class="fu">colnames</span>(wos_dt))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#head(wos_dt[,c("DOI", "PUB_NAME", "ABSTRACT")])</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="query-dois" class="level2">
<h2 class="anchored" data-anchor-id="query-dois">Query DOIs</h2>
<p>Now, if you already had the list of DOIS you are interested in, you can directly query the DOIs and get the accompanying information</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dois <span class="ot">&lt;-</span> wos_dt<span class="sc">$</span>DOI[<span class="sc">!</span><span class="fu">is.na</span>(wos_dt<span class="sc">$</span>DOI)]</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dois, <span class="at">collapse =</span> <span class="st">" OR "</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">'DO=('</span>,query,<span class="st">')'</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>query</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "DO=(10.1016/j.enpol.2006.02.010 OR 10.1108/S1057-1922(2009)0000014011 OR 10.1016/j.respol.2011.12.012 OR 10.1093/scipol/scs081 OR 10.1016/j.gloenvcha.2012.12.004 OR 10.3390/su5114778 OR 10.5751/ES-06570-190257 OR 10.1016/j.ijheh.2014.05.003 OR 10.1080/00343404.2013.834320 OR 10.1016/j.enpol.2015.03.009 OR 10.1186/s13705-015-0046-8 OR 10.1007/978-981-287-655-3_8 OR 10.2217/pme-2016-0039 OR 10.1016/j.envsci.2017.04.015 OR 10.1016/j.ecolecon.2017.04.018 OR 10.1016/j.techfore.2017.03.028 OR 10.1016/j.enpol.2017.04.042 OR 10.1016/j.techfore.2017.01.002 OR 10.1016/j.tourman.2017.09.005 OR 10.1080/23299460.2017.1310523 OR 10.1016/j.jclepro.2017.12.198 OR 10.1016/j.enpol.2018.03.038 OR 10.1016/j.erss.2018.04.011 OR 10.1016/j.agsy.2018.06.014 OR 10.1007/978-981-10-4792-3_9 OR 10.1016/j.ecolecon.2018.10.002 OR 10.1016/j.jclepro.2018.12.287 OR 10.1016/j.techfore.2018.11.019 OR 10.1007/s10460-019-09915-4 OR 10.1016/j.erss.2019.01.023 OR 10.3390/su11133522 OR 10.1007/s10806-019-09806-y OR 10.1007/978-3-030-18400-1_16 OR 10.3390/su11236756 OR 10.1016/j.trd.2020.102230 OR 10.1016/j.agsy.2020.102834 OR 10.1017/S0022278X20000208 OR 10.1016/j.eist.2019.11.005 OR 10.1016/j.eist.2020.11.006 OR 10.1057/s41287-021-00409-w OR 10.1016/j.eist.2021.03.004 OR 10.3390/su13147576 OR 10.1016/j.respol.2021.104253 OR 10.1111/jav.02868 OR 10.3390/su14042132 OR 10.1002/bse.3083 OR 10.1016/j.rser.2022.112094 OR 10.1016/j.erss.2022.102571 OR 10.1016/j.eist.2022.02.003 OR 10.3390/su14116734 OR 10.1177/00224871221105784 OR 10.1016/j.energy.2022.124075 OR 10.3390/en15197435 OR 10.1016/j.scs.2022.104168 OR 10.1016/j.jclepro.2022.134367 OR 10.1016/j.jclepro.2022.134892 OR 10.1016/j.trd.2022.103460 OR 10.1080/21683565.2022.2164823 OR 10.1016/j.eist.2022.11.007 OR 10.1016/j.eist.2023.100701 OR 10.1080/09537325.2023.2188972 OR 10.3390/su15065299 OR 10.1016/j.technovation.2023.102764 OR 10.1016/j.enpol.2023.113694 OR 10.1016/j.respol.2023.104866 OR 10.1080/21683565.2023.2275154 OR 10.3390/su152215861)"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>url<span class="sc">$</span>query <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">firstRecord =</span> <span class="dv">1</span>,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">optionView =</span> <span class="st">'FR'</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">databaseId =</span> <span class="st">'WOS'</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lang=</span><span class="st">'en'</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">publishTimeSpan=</span><span class="st">'1900-01-01+2023-12-31'</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cursor =</span> <span class="st">"*"</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">usrQuery =</span> query)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>built_url <span class="ot">=</span> <span class="fu">url_build</span>(url)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>qurl <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(built_url,<span class="st">"%2A"</span>,<span class="st">"*"</span>)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>js <span class="ot">&lt;-</span> <span class="fu">request</span>(qurl) <span class="sc">%&gt;%</span>  httr2<span class="sc">::</span><span class="fu">req_headers</span>(<span class="st">`</span><span class="at">X-ApiKey</span><span class="st">`</span> <span class="ot">=</span> wos_key) <span class="sc">%&gt;%</span> </span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>() <span class="sc">%&gt;%</span>  <span class="fu">resp_body_string</span>() <span class="sc">%&gt;%</span>  jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>()</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>js<span class="sc">$</span>QueryResult<span class="sc">$</span>RecordsFound</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 67</code></pre>
</div>
</div>
<p>This is pretty good at catching them:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(dois) <span class="sc">==</span> js<span class="sc">$</span>QueryResult<span class="sc">$</span>RecordsFound</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
</section>
<section id="scopus" class="level1">
<h1>Scopus</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### note this only works on campus OR VPN-ing to campus</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="do">### the cursor * ability needed to scan more than 200 results requires what SCOPUS calls an "entitlement"</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="do">### that "entitlement" requires an institutional subscription</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="do">#### the workaround would be to chunk the call in increments &lt; 200 results, e.g., search by publication month or something</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#req = httr2::request(base)</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>base <span class="ot">=</span> <span class="st">'https://api.elsevier.com/content/search/scopus'</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">url_parse</span>(base)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#url$port &lt;- 80</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="do">### if complete instead of standard, then 200</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>count <span class="ot">=</span> <span class="st">'25'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="query-a-phrase-1" class="level2">
<h2 class="anchored" data-anchor-id="query-a-phrase-1">Query a phrase</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scopus:</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="do">### note this: https://stackoverflow.com/questions/35526682/scopus-search-title-abs-key</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># TITLE-ABS-KEY means "is this satisfied in total in those three"</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># so instead, we do title OR key OR abs where title and key have same filter, and abs says "must be 'environmental governance'"</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> <span class="st">"niche innovation"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Good source: https://webofscience.help.clarivate.com/en-us/Content/wos-core-collection/woscc-search-field-tags.htm</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">'"'</span>, query,<span class="st">'"'</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">'TITLE-ABS-KEY ( '</span>,query,<span class="st">' )'</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>query</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "TITLE-ABS-KEY ( \"niche innovation\" )"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### abstract</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>url<span class="sc">$</span>query <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">apiKey =</span> scopus_key,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">httpAccept =</span> <span class="st">'application/json'</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">view =</span> <span class="st">'COMPLETE'</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cursor =</span><span class="st">'*'</span>,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#count = count,</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">query =</span> query)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>qurl <span class="ot">=</span> <span class="fu">url_build</span>(url)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="do">#### for some reason, scopus wants un-encoded * and I'm not sure the fancy way to do that, so just encode above and then use string replace here</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>qurl <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(qurl,<span class="st">"%2A"</span>,<span class="st">"*"</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>js <span class="ot">=</span> <span class="fu">request</span>(qurl) <span class="sc">%&gt;%</span>  <span class="fu">req_perform</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">resp_body_string</span>() <span class="sc">%&gt;%</span>  jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>()</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>js<span class="sc">$</span><span class="st">`</span><span class="at">search-results</span><span class="st">`</span><span class="sc">$</span><span class="st">`</span><span class="at">opensearch:totalResults</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "194"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>js<span class="sc">$</span><span class="st">`</span><span class="at">search-results</span><span class="st">`</span><span class="sc">$</span><span class="st">`</span><span class="at">opensearch:itemsPerPage</span><span class="st">`</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "25"</code></pre>
</div>
</div>
<p>But because scopus does have a cursor, we’ll use a while loop</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>scopus <span class="ot">=</span> <span class="fu">list</span>()</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>i <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(i <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>      js<span class="sc">$</span><span class="st">`</span><span class="at">search-results</span><span class="st">`</span><span class="sc">$</span>cursor<span class="sc">$</span><span class="st">`</span><span class="at">@current</span><span class="st">`</span> <span class="sc">!=</span> js<span class="sc">$</span><span class="st">`</span><span class="at">search-results</span><span class="st">`</span><span class="sc">$</span>cursor<span class="sc">$</span><span class="st">`</span><span class="at">@next</span><span class="st">`</span>){</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(<span class="fl">0.25</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  url<span class="sc">$</span>query <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">apiKey =</span> scopus_key,</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">httpAccept =</span> <span class="st">'application/json'</span>,</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">view =</span> <span class="st">'COMPLETE'</span>,</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">cursor =</span> <span class="fu">ifelse</span>(i <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"*"</span>, js<span class="sc">$</span><span class="st">`</span><span class="at">search-results</span><span class="st">`</span><span class="sc">$</span>cursor<span class="sc">$</span><span class="st">`</span><span class="at">@next</span><span class="st">`</span>),</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">count =</span> count,</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">query =</span> query </span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  qurl <span class="ot">=</span> <span class="fu">url_build</span>(url)</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>  <span class="do">#### for some reason, scopus wants un-encoded * and I'm not sure the fancy way to do that, so just encode   above and then use string replace here</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>  qurl <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(qurl,<span class="st">"%2A"</span>,<span class="st">"*"</span>)</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>  js <span class="ot">=</span> <span class="fu">request</span>(qurl) <span class="sc">%&gt;%</span>  <span class="fu">req_perform</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">resp_body_string</span>() <span class="sc">%&gt;%</span>  jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>()</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>  scopus[[i]] <span class="ot">&lt;-</span> js<span class="sc">$</span><span class="st">`</span><span class="at">search-results</span><span class="st">`</span><span class="sc">$</span>entry</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">=</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we have all of the outputs from the database, but they are hard to manage, as there are dataframes of static and dynamic data nested together</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">unlist</span>(<span class="fu">lapply</span>(scopus, nrow)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 194</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(scopus[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  @_fa
1 true
2 true
3 true
4 true
5 true
6 true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                link
1 true, true, true, true, true, self, author-affiliation, scopus, scopus-citedby, full-text, https://api.elsevier.com/content/abstract/scopus_id/85213063273, https://api.elsevier.com/content/abstract/scopus_id/85213063273?field=author,affiliation, https://www.scopus.com/inward/record.uri?partnerID=HzOxMe3b&amp;scp=85213063273&amp;origin=inward, https://www.scopus.com/inward/citedby.uri?partnerID=HzOxMe3b&amp;scp=85213063273&amp;origin=inward, https://api.elsevier.com/content/article/eid/1-s2.0-S0959652624039829
2                                                                                         true, true, true, true, self, author-affiliation, scopus, scopus-citedby, https://api.elsevier.com/content/abstract/scopus_id/85208697429, https://api.elsevier.com/content/abstract/scopus_id/85208697429?field=author,affiliation, https://www.scopus.com/inward/record.uri?partnerID=HzOxMe3b&amp;scp=85208697429&amp;origin=inward, https://www.scopus.com/inward/citedby.uri?partnerID=HzOxMe3b&amp;scp=85208697429&amp;origin=inward
3 true, true, true, true, true, self, author-affiliation, scopus, scopus-citedby, full-text, https://api.elsevier.com/content/abstract/scopus_id/85207934679, https://api.elsevier.com/content/abstract/scopus_id/85207934679?field=author,affiliation, https://www.scopus.com/inward/record.uri?partnerID=HzOxMe3b&amp;scp=85207934679&amp;origin=inward, https://www.scopus.com/inward/citedby.uri?partnerID=HzOxMe3b&amp;scp=85207934679&amp;origin=inward, https://api.elsevier.com/content/article/eid/1-s2.0-S2210422424001187
4                                                                                         true, true, true, true, self, author-affiliation, scopus, scopus-citedby, https://api.elsevier.com/content/abstract/scopus_id/85210268753, https://api.elsevier.com/content/abstract/scopus_id/85210268753?field=author,affiliation, https://www.scopus.com/inward/record.uri?partnerID=HzOxMe3b&amp;scp=85210268753&amp;origin=inward, https://www.scopus.com/inward/citedby.uri?partnerID=HzOxMe3b&amp;scp=85210268753&amp;origin=inward
5 true, true, true, true, true, self, author-affiliation, scopus, scopus-citedby, full-text, https://api.elsevier.com/content/abstract/scopus_id/85205472571, https://api.elsevier.com/content/abstract/scopus_id/85205472571?field=author,affiliation, https://www.scopus.com/inward/record.uri?partnerID=HzOxMe3b&amp;scp=85205472571&amp;origin=inward, https://www.scopus.com/inward/citedby.uri?partnerID=HzOxMe3b&amp;scp=85205472571&amp;origin=inward, https://api.elsevier.com/content/article/eid/1-s2.0-S0959652624032232
6                                                                                         true, true, true, true, self, author-affiliation, scopus, scopus-citedby, https://api.elsevier.com/content/abstract/scopus_id/85203995774, https://api.elsevier.com/content/abstract/scopus_id/85203995774?field=author,affiliation, https://www.scopus.com/inward/record.uri?partnerID=HzOxMe3b&amp;scp=85203995774&amp;origin=inward, https://www.scopus.com/inward/citedby.uri?partnerID=HzOxMe3b&amp;scp=85203995774&amp;origin=inward
                                                        prism:url
1 https://api.elsevier.com/content/abstract/scopus_id/85213063273
2 https://api.elsevier.com/content/abstract/scopus_id/85208697429
3 https://api.elsevier.com/content/abstract/scopus_id/85207934679
4 https://api.elsevier.com/content/abstract/scopus_id/85210268753
5 https://api.elsevier.com/content/abstract/scopus_id/85205472571
6 https://api.elsevier.com/content/abstract/scopus_id/85203995774
          dc:identifier                eid
1 SCOPUS_ID:85213063273 2-s2.0-85213063273
2 SCOPUS_ID:85208697429 2-s2.0-85208697429
3 SCOPUS_ID:85207934679 2-s2.0-85207934679
4 SCOPUS_ID:85210268753 2-s2.0-85210268753
5 SCOPUS_ID:85205472571 2-s2.0-85205472571
6 SCOPUS_ID:85203995774 2-s2.0-85203995774
                                                                                                                                               dc:title
1 On the challenges of civic engagement in the mobility transition - A conceptual analysis of the linkages between car dependence and collective action
2      Introducing intermediate wheatgrass as a perennial grain crop into farming systems: insights into the decision-making process of pioneer farmers
3                               The dynamics of change towards sustainability in developing countries: Evidence from Ghana's Waste-to-Energy transition
4                 The Potential of the Society 5.0 Strategy to Be a Solution to the Political and Structural Problems of Countries: The Case of Türkiye
5                                                                                      Upscaling cargo bike sharing in cities: A comparative case study
6                      Inclusive Innovation Governance for Just Transitions: Insights from the Bean Agri-Food System in the Brunca Region of Costa Rica
         dc:creator                             prism:publicationName
1         Allert V.                     Journal of Cleaner Production
2          Ginot C.              Agronomy for Sustainable Development
3          Tomai M. Environmental Innovation and Societal Transitions
4      Topcuoglu E.                      Sustainability (Switzerland)
5     Zimmermann K.                     Journal of Cleaner Production
6 Ortiz-Valverde R.                      Sustainability (Switzerland)
  prism:issn prism:volume prism:pageRange prism:coverDate
1   09596526          486            &lt;NA&gt;      2025-01-01
2   17740746           44            &lt;NA&gt;      2024-12-01
3   22104224           53            &lt;NA&gt;      2024-12-01
4       &lt;NA&gt;           16            &lt;NA&gt;      2024-11-01
5   09596526          477            &lt;NA&gt;      2024-10-20
6       &lt;NA&gt;           16            &lt;NA&gt;      2024-09-01
  prism:coverDisplayDate                     prism:doi               pii
1         1 January 2025 10.1016/j.jclepro.2024.144533 S0959652624039829
2          December 2024    10.1007/s13593-024-00993-1              &lt;NA&gt;
3          December 2024    10.1016/j.eist.2024.100928 S2210422424001187
4          November 2024            10.3390/su16229825              &lt;NA&gt;
5        20 October 2024 10.1016/j.jclepro.2024.143774 S0959652624032232
6         September 2024            10.3390/su16177433              &lt;NA&gt;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                dc:description
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                 In complex transition processes, such as the mobility transition, active citizens have the power to change and to demand change of the incumbent mobility system. For individuals, a substantial challenge lies in breaking up and transforming dominant, unsustainable practices and structures in place. Shifting consumption patterns and routines can contribute to changing such practices, but in democratic societies in particular, stronger levers lie in collective, political participation processes: Individuals can partake by electing representatives who can challenge the car-centric mobility system, or by engaging in citizen initiatives and protests to back up niche innovations and demand policy changes. However, citizen engagement for a sustainable mobility transition faces several structural challenges rooted in the characteristics of the car-centric mobility system. In this paper, we theorize how these characteristics of the car-centric regime influence psychological processes underlying motivation for collective action participation. Based on the Social Identity Model of Pro-Environmental Action (Fritsche et al., 2018), we highlight how motivational factors like a common social identity, collective efficacy beliefs and ingroup norms and goals develop in relation to the specificities of the context the collective action occurs in. We exemplify how the systemic level interacts with individual, within-actor processes and thereby provide a critical perspective on collective action research in transport. This paper explores and delineates intersections between transition studies and collective action research and sketches an interdisciplinary research agenda to advance our understanding of engagement of citizens in mobility activism.
2                                                                                                                                                                                                                                                                                                                                                                                                          The perennial grain intermediate wheatgrass (Thinopyrum intermedium, commercial name KernzaTM) has been proposed as a diversification crop for producing forage and grain and providing ecosystem services to farmers. Although a few studies have addressed farmers’ interests in the crop, information is lacking about the links between farmers’ goals and crop management, i.e., how farmers aim at integrating this crop in their systems. Closing this gap, this paper analyzes for the first time the introduction of intermediate wheatgrass (IWG) from a farmer perspective, as a set of decision plans and goals. The overarching orientations of the farm and organization of the production system, referred as strategic decisions, interact with short-term crop management (i.e., tactical decisions) and farmers’ goals for IWG. In total, 17 individual semi-structured interviews and 2 collective crop management prototyping workshops in France were used to analyze farmers’ rationales as a function of their farm systems, agronomic constraints, and know-how. The study demonstrates that farmers’ interests in IWG revolved around multiple ecosystem services and financial returns. Three ideal-types of farms testing IWG emerged from the relationships between existing farming systems and goals for IWG. The strategic and tactical decisions regarding the integration and management of IWG were contingent on the farming systems, the goals for IWG, the farmers’ know-how, and their ability to mitigate risks. Implications for the future development of intermediate wheatgrass as a niche innovation are considered based on farmers’ points of view. This study provides insights into the ideas and concerns of French farmers regarding IWG and proposes a framework for discussing the introduction of a new crop in a farm system.
3                                                                                                                                                                                                                                                                                                                                                             This paper examines the role of transition factors in the emergence, upscaling, and diffusion of niche innovations in developing countries and juxtaposes them with the case study of a Waste-to-Energy socio-technical niche in the ongoing green transition of Ghana's waste management and energy systems. A systematic literature review of the Multi-Level Perspective (MLP) and the Technological Innovation Systems (TIS) transition frameworks applications to developing countries identifies twenty-four categories of influential factors and produces four main inferences: (i) niche innovations and experiments that are often non-technological and are driven by urgent local needs, remain understudied; (ii) landscape factors strongly shape the selection, development, and spread of innovations; (iii) regimes are multimodal, with co-existing, interconnected technologies, rules, structures, and roles, causing tensions; and (iv) innovation systems rely heavily on external sources, and they lack cohesive selection, monitoring, and assessment mechanisms. This review is followed by the case study constructed using academic literature, government and programme documents as well as interviews with key stakeholders. The inferences of the literature review are validated and additionally the role of the twenty-four categories of transition factors is examined. Key landscape, regime and innovation system function factors are found to play both a positive and negative role in the green transition. Landscape factors are the strongest drivers, but the most challenging barriers can be from other levels too. A cooperative governance model at local and regional levels, with maximal access to knowledge for redesigning of technologies to local conditions and continuous communication with key stakeholders and communities is essential for successful transition.
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Türkiye is making great efforts to generate new projects within the scope of the “Türkiye Century” strategy, with the aim of increasing its effectiveness in the international community and the welfare of its citizens. In this respect, it is of great importance to conduct new studies and develop suggestions to further increase the effectiveness of new projects. This study seeks to provide a solution to the problems in politics, education, economy, public administration, justice, and corruption identified and reported by international organizations such as the OECD, the European Union, and the public institutions of the Republic of Türkiye, by associating them with the Society 5.0 strategy. The study aims to test the applicability of Society 5.0 in solving these problems through structural equation modeling using niche innovation and convergent stakeholder theories. In the light of the data obtained, it is realized that Society 5.0 has an effect on all the other variables except for one and the policy variable mediates this situation. In this regard, in accordance with the findings, it can be stated that Society 5.0 can be regarded as a significant alternative for solving the problems experienced on a suitable political basis.
5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Urban mobility transitions are essential to mitigate climate change and improve the quality of life in cities. Cargo bikes (CBs) show promise in replacing motorised vehicles due to their lower carbon intensity, space efficiency, and ability to reduce air and noise pollution. CB sharing relieves users from purchase and maintenance costs. However, it is mainly adopted by individuals with high environmental awareness. Barriers to CB sharing stem from the urban infrastructure, individual mobility choices, and the design of CB sharing organisations (CBSOs). This article analyses upscaling pathways for CB sharing, i.e., increasing their use by a broader audience and reshaping the urban mobility regime. It delivers a comparative case study analysis of two CBSOs: Grätzlrad, Vienna, and LastenVelo e.V., Freiburg. Data was collected through academic and grey literature review and 15 semi-structured interviews with CB sharing stakeholders and experts. The analytical framework is informed by strategic niche management, viewing CB sharing as a niche innovation in the urban mobility regime. The article enhances understanding of CB sharing, the interaction of CBSOs with key actors, and their scalability. CBSOs should increase the availability of shared CBs while reducing the organisational effort required from users. New ways of CB sharing, e.g., integration in shared mobility hubs, should be explored. Municipal actors play a crucial role in upscaling and ensuring that CB sharing reaches a diverse user base. The findings are useful for academia, practitioners and policymakers working with CB sharing and other sustainable urban mobility solutions.
6 This study explores how an inclusive governance of “niche” innovations with family farmers enables or limits the realization of just transitions in family farming at different scales, from the local to the national levels. The research focuses on a case study in the Brunca region of Costa Rica, which has pioneered innovations for bean research with family farmers. The primary source of information for the study was in-depth interviews with relevant stakeholders. Secondary information comes from a desk review of the relevant policies and strategic documents from the relevant authorities. Lastly, a semi-scoping review was conducted to explore gender and intergenerational gaps in plant breeding, as well as potential conflicts between plant breeding and on-farm agro-diversity. The inclusive governance of bean research contributes to the realization of just-transition dimensions of justice, such as recognitional, procedural, and distributional justice, as a result of farmers’ engagement in participatory plant-breeding processes, and due to the coordination between different institutions at the local and national levels. Progress has been made in terms of the recognition and participation of farmers in research and in decision-making locally. The findings show interactions between the local and national scales, in terms of the commercialization of farmers’ seeds. However, the Costa Rican program for bean research struggles to engage family farmers in national decision-making processes and falls short of addressing equality and intergenerational issues. It also faces challenges in reaching a balance between short-term income generation and long-term conservation of agro-biodiversity on the farm. Fostering just transitions in family farming would require a greater inclusion of women and youth by the Costa Rican bean system. This implies allocating resources to increase their capacities and participation in bean research, as well as in decision-making at all levels. This is imperative and could be achieved if the government and relevant stakeholders align their strategic objectives and priorities to shorten gender and intergenerational gaps within the bean production system.
  citedby-count
1             0
2             0
3             0
4             0
5             1
6             0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             affiliation
1                                                                                                                                                                                                                                                                                                                             true, true, https://api.elsevier.com/content/affiliation/affiliation_id/60280671, https://api.elsevier.com/content/affiliation/affiliation_id/60032991, 60280671, 60032991, Rheinland-Pfälzische Technische Universität Kaiserslautern-Landau, Technische Universität Dortmund, Kaiserslautern, Dortmund, Germany, Germany
2                                                                                                                                                                                                                                                                                                                                                                                    true, true, https://api.elsevier.com/content/affiliation/affiliation_id/60012888, https://api.elsevier.com/content/affiliation/affiliation_id/60004156, 60012888, 60004156, ISARA Lyon, Wageningen University &amp;amp; Research, Lyon, Wageningen, France, Netherlands
3                                                                                                                                                                                                                                                                             true, true, https://api.elsevier.com/content/affiliation/affiliation_id/60032882, https://api.elsevier.com/content/affiliation/affiliation_id/60024967, 60032882, 60024967, Technische Universiteit Eindhoven, United Nations University – Maastricht Economic and Social Research Institute on Innovation and Technology, Eindhoven, Maastricht, Netherlands, Netherlands
4 true, true, true, true, true, https://api.elsevier.com/content/affiliation/affiliation_id/60193849, https://api.elsevier.com/content/affiliation/affiliation_id/60106038, https://api.elsevier.com/content/affiliation/affiliation_id/60088374, https://api.elsevier.com/content/affiliation/affiliation_id/60021828, https://api.elsevier.com/content/affiliation/affiliation_id/60014208, 60193849, 60106038, 60088374, 60021828, 60014208, Samsun University, Giresun Üniversitesi, Osmaniye Korkut Ata University, Van Yüzüncü Yıl Üniversitesi, Kafkas Üniversitesi, Samsun, Giresun, Osmaniye, Van, Kars, Turkey, Turkey, Turkey, Turkey, Turkey
5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 true, https://api.elsevier.com/content/affiliation/affiliation_id/60118751, 60118751, The International Institute for Industrial Environmental Economics, Lund, Sweden
6                                                                                                                                                                                                                                                                                                                                                                                                                                                                   true, https://api.elsevier.com/content/affiliation/affiliation_id/60029724, 60029724, CSIC-UPV - Instituto de Gestión de la Innovación y del Conocimiento (INGENIO), Valencia, Spain
  prism:aggregationType subtype subtypeDescription author-count.@limit
1               Journal      ar            Article                 100
2               Journal      ar            Article                 100
3               Journal      ar            Article                 100
4               Journal      ar            Article                 100
5               Journal      ar            Article                 100
6               Journal      ar            Article                 100
  author-count.@total author-count.$
1                   2              2
2                   6              6
3                   3              3
4                   7              7
5                   2              2
6                   2              2
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     author
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         true, true, 1, 2, https://api.elsevier.com/content/author/author_id/57223252732, https://api.elsevier.com/content/author/author_id/55816972400, 57223252732, 55816972400, 0000-0002-5962-5991, 0000-0001-6672-3832, Allert V., Reese G., Allert, Reese, Viktoria, Gerhard, V., G., true, 60032991, true, 60280671
2                                                                                                                                                                             true, true, true, true, true, true, 1, 2, 3, 4, 5, 6, https://api.elsevier.com/content/author/author_id/59405488800, https://api.elsevier.com/content/author/author_id/23093081100, https://api.elsevier.com/content/author/author_id/55808991900, https://api.elsevier.com/content/author/author_id/7003273302, https://api.elsevier.com/content/author/author_id/9737272700, https://api.elsevier.com/content/author/author_id/57193416880, 59405488800, 23093081100, 55808991900, 7003273302, 9737272700, 57193416880, 0009-0006-3555-6326, NA, NA, NA, NA, NA, Ginot C., Bathellier C., David C., Rossing W.A.H., Celette F., Duchene O., Ginot, Bathellier, David, Rossing, Celette, Duchene, Christelle, Camille, Christophe, Walter A.H., Florian, Olivier, C., C., C., W.A.H., F., O., true, true, 60012888, 60004156, true, 60012888, true, 60012888, true, 60004156, true, 60012888, true, 60012888
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     true, true, true, 1, 2, 3, https://api.elsevier.com/content/author/author_id/58849970500, https://api.elsevier.com/content/author/author_id/54385627300, https://api.elsevier.com/content/author/author_id/7006366996, 58849970500, 54385627300, 7006366996, 0000-0001-7631-0353, NA, NA, Tomai M., Papachristos G., Ramani S.V., Tomai, Papachristos, Ramani, Maria, George, Shyama V., M., G., S.V., true, 60024967, true, 60032882, true, 60024967
4 true, true, true, true, true, true, true, 1, 2, 3, 4, 5, 6, 7, https://api.elsevier.com/content/author/author_id/57222374988, https://api.elsevier.com/content/author/author_id/58669441600, https://api.elsevier.com/content/author/author_id/57222371805, https://api.elsevier.com/content/author/author_id/57226890099, https://api.elsevier.com/content/author/author_id/59425267000, https://api.elsevier.com/content/author/author_id/59425842100, https://api.elsevier.com/content/author/author_id/59425724700, 57222374988, 58669441600, 57222371805, 57226890099, 59425267000, 59425842100, 59425724700, 0000-0003-3563-0566, 0000-0002-8623-614X, NA, NA, 0000-0002-7916-1709, NA, NA, Topcuoglu E., Oktaysoy O., Kaygin E., Kosa G., Uygungil-Erdogan S., Kobanoglu M.S., Turan-Torun B., Topcuoglu, Oktaysoy, Kaygin, Kosa, Uygungil-Erdogan, Kobanoglu, Turan-Torun, Ethem, Onur, Erdogan, Gozde, Selen, Mehmet Selman, Burcu, E., O., E., G., S., M.S., B., true, 60106038, true, 60014208, true, 60014208, true, 60014208, true, 60088374, true, 60193849, true, 60021828
5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        true, true, 1, 2, https://api.elsevier.com/content/author/author_id/59351704200, https://api.elsevier.com/content/author/author_id/57190960447, 59351704200, 57190960447, Zimmermann K., Palgan Y.V., Zimmermann, Palgan, Kaja, Yuliya Voytenko, K., Y.V., true, 60118751, true, 60118751, NA, 0000-0001-8342-085X
6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               true, true, 1, 2, https://api.elsevier.com/content/author/author_id/57478139700, https://api.elsevier.com/content/author/author_id/36778175600, 57478139700, 36778175600, 0000-0001-9210-0436, NA, Ortiz-Valverde R., Peris-Blanes J., Ortiz-Valverde, Peris-Blanes, Rosalba, Jordi, R., J., true, 60029724, true, 60029724
                                                                                                                          authkeywords
1                         Car dependence | Collective action | Exnovation | Interdisciplinary | Mobility activism | Transition process
2 Crop management | Diversification | Participatory research | Prototyping | Strategic and tactical decisions | Thinopyrum intermedium
3                            Developing countries | Ghana | Sustainability transitions | Transition frameworks | Waste-to-Energy (WtE)
4                                                                            corruption | education | justice | politics | Society 5.0
5                    Cargo bike | Cities | Sharing economy | Strategic niche management | Upscaling | Urban sustainability transitions
6                     equal participation | family farming | inclusive governance | just transitions | niche innovations | recognition
  article-number   source-id  fund-acr    fund-no
1         144533       19167      BMBF R01UU1907B
2             58      145746      &lt;NA&gt;  undefined
3         100928 19700201681 UNU-MERIT  undefined
4           9825 21100240100      &lt;NA&gt;  undefined
5         143774       19167        LU  undefined
6           7433 21100240100       UPV  undefined
                                                                                               fund-sponsor
1                                                               Bundesministerium für Bildung und Forschung
2                                                                                               Biodiversa+
3 Maastricht Economic and Social Research Institute on Innovation and Technology, United Nations University
4                                                                                                      &lt;NA&gt;
5                                                                                         Lunds Universitet
6                                                                       Universitat Politècnica de València
  openaccess openaccessFlag prism:eIssn prism:issueIdentifier
1          1           TRUE        &lt;NA&gt;                  &lt;NA&gt;
2          1           TRUE    17730155                     6
3          1           TRUE    22104232                  &lt;NA&gt;
4          1           TRUE    20711050                    22
5          1           TRUE        &lt;NA&gt;                  &lt;NA&gt;
6          1           TRUE    20711050                    17
                     value                        value prism:isbn
1                     NULL                         NULL       NULL
2 all, publisherhybridgold All Open Access, Hybrid Gold       NULL
3 all, publisherhybridgold All Open Access, Hybrid Gold       NULL
4                     NULL                         NULL       NULL
5                     NULL                         NULL       NULL
6   all, publisherfullgold        All Open Access, Gold       NULL</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="do">### for some reason, author-count poses a bit of an issue becuase it's weird</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="do">### it's also unnecessary, and then I drop freetoread while at it..</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>scopus_filter <span class="ot">&lt;-</span> <span class="fu">lapply</span>(scopus, <span class="cf">function</span>(x) </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  x[<span class="sc">!</span><span class="fu">names</span>(x) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'freetoread'</span>,<span class="st">"freetoreadLabel"</span>,<span class="st">'author-count'</span>)])</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>scopus_dt <span class="ot">&lt;-</span> <span class="fu">rbindlist</span>(scopus_filter, <span class="at">use.names =</span> T, <span class="at">fill =</span> T)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>scopus_dt <span class="ot">&lt;-</span> scopus_dt[,<span class="fu">c</span>(<span class="st">'dc:identifier'</span>, <span class="st">'prism:doi'</span>, <span class="st">'dc:title'</span>, </span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'prism:publicationName'</span>, <span class="st">'subtypeDescription'</span>, </span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>                          <span class="st">'dc:description'</span>, <span class="st">'authkeywords'</span>, <span class="st">'prism:coverDate'</span>)]</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(scopus_dt) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(wos_dt)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>scopus_dt<span class="sc">$</span>PUBYEAR <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">year</span>(scopus_dt<span class="sc">$</span>PUBYEAR)</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>scopus_dt<span class="sc">$</span>KEYWORDS <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(scopus_dt<span class="sc">$</span>KEYWORDS, <span class="st">" </span><span class="sc">\\</span><span class="st">| "</span>, <span class="st">";"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(scopus_dt[,<span class="fu">c</span>(<span class="st">"DOI"</span>, <span class="st">"PUB_NAME"</span>, <span class="st">"ABSTRACT"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                             DOI
                          &lt;char&gt;
1: 10.1016/j.jclepro.2024.144533
2:    10.1007/s13593-024-00993-1
3:    10.1016/j.eist.2024.100928
4:            10.3390/su16229825
5: 10.1016/j.jclepro.2024.143774
6:            10.3390/su16177433
                                            PUB_NAME
                                              &lt;char&gt;
1:                     Journal of Cleaner Production
2:              Agronomy for Sustainable Development
3: Environmental Innovation and Societal Transitions
4:                      Sustainability (Switzerland)
5:                     Journal of Cleaner Production
6:                      Sustainability (Switzerland)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       ABSTRACT
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         &lt;char&gt;
1:                                                                                                                                                                                                                                                                                                                                                                                                                                                                 In complex transition processes, such as the mobility transition, active citizens have the power to change and to demand change of the incumbent mobility system. For individuals, a substantial challenge lies in breaking up and transforming dominant, unsustainable practices and structures in place. Shifting consumption patterns and routines can contribute to changing such practices, but in democratic societies in particular, stronger levers lie in collective, political participation processes: Individuals can partake by electing representatives who can challenge the car-centric mobility system, or by engaging in citizen initiatives and protests to back up niche innovations and demand policy changes. However, citizen engagement for a sustainable mobility transition faces several structural challenges rooted in the characteristics of the car-centric mobility system. In this paper, we theorize how these characteristics of the car-centric regime influence psychological processes underlying motivation for collective action participation. Based on the Social Identity Model of Pro-Environmental Action (Fritsche et al., 2018), we highlight how motivational factors like a common social identity, collective efficacy beliefs and ingroup norms and goals develop in relation to the specificities of the context the collective action occurs in. We exemplify how the systemic level interacts with individual, within-actor processes and thereby provide a critical perspective on collective action research in transport. This paper explores and delineates intersections between transition studies and collective action research and sketches an interdisciplinary research agenda to advance our understanding of engagement of citizens in mobility activism.
2:                                                                                                                                                                                                                                                                                                                                                                                                          The perennial grain intermediate wheatgrass (Thinopyrum intermedium, commercial name KernzaTM) has been proposed as a diversification crop for producing forage and grain and providing ecosystem services to farmers. Although a few studies have addressed farmers’ interests in the crop, information is lacking about the links between farmers’ goals and crop management, i.e., how farmers aim at integrating this crop in their systems. Closing this gap, this paper analyzes for the first time the introduction of intermediate wheatgrass (IWG) from a farmer perspective, as a set of decision plans and goals. The overarching orientations of the farm and organization of the production system, referred as strategic decisions, interact with short-term crop management (i.e., tactical decisions) and farmers’ goals for IWG. In total, 17 individual semi-structured interviews and 2 collective crop management prototyping workshops in France were used to analyze farmers’ rationales as a function of their farm systems, agronomic constraints, and know-how. The study demonstrates that farmers’ interests in IWG revolved around multiple ecosystem services and financial returns. Three ideal-types of farms testing IWG emerged from the relationships between existing farming systems and goals for IWG. The strategic and tactical decisions regarding the integration and management of IWG were contingent on the farming systems, the goals for IWG, the farmers’ know-how, and their ability to mitigate risks. Implications for the future development of intermediate wheatgrass as a niche innovation are considered based on farmers’ points of view. This study provides insights into the ideas and concerns of French farmers regarding IWG and proposes a framework for discussing the introduction of a new crop in a farm system.
3:                                                                                                                                                                                                                                                                                                                                                             This paper examines the role of transition factors in the emergence, upscaling, and diffusion of niche innovations in developing countries and juxtaposes them with the case study of a Waste-to-Energy socio-technical niche in the ongoing green transition of Ghana's waste management and energy systems. A systematic literature review of the Multi-Level Perspective (MLP) and the Technological Innovation Systems (TIS) transition frameworks applications to developing countries identifies twenty-four categories of influential factors and produces four main inferences: (i) niche innovations and experiments that are often non-technological and are driven by urgent local needs, remain understudied; (ii) landscape factors strongly shape the selection, development, and spread of innovations; (iii) regimes are multimodal, with co-existing, interconnected technologies, rules, structures, and roles, causing tensions; and (iv) innovation systems rely heavily on external sources, and they lack cohesive selection, monitoring, and assessment mechanisms. This review is followed by the case study constructed using academic literature, government and programme documents as well as interviews with key stakeholders. The inferences of the literature review are validated and additionally the role of the twenty-four categories of transition factors is examined. Key landscape, regime and innovation system function factors are found to play both a positive and negative role in the green transition. Landscape factors are the strongest drivers, but the most challenging barriers can be from other levels too. A cooperative governance model at local and regional levels, with maximal access to knowledge for redesigning of technologies to local conditions and continuous communication with key stakeholders and communities is essential for successful transition.
4:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Türkiye is making great efforts to generate new projects within the scope of the “Türkiye Century” strategy, with the aim of increasing its effectiveness in the international community and the welfare of its citizens. In this respect, it is of great importance to conduct new studies and develop suggestions to further increase the effectiveness of new projects. This study seeks to provide a solution to the problems in politics, education, economy, public administration, justice, and corruption identified and reported by international organizations such as the OECD, the European Union, and the public institutions of the Republic of Türkiye, by associating them with the Society 5.0 strategy. The study aims to test the applicability of Society 5.0 in solving these problems through structural equation modeling using niche innovation and convergent stakeholder theories. In the light of the data obtained, it is realized that Society 5.0 has an effect on all the other variables except for one and the policy variable mediates this situation. In this regard, in accordance with the findings, it can be stated that Society 5.0 can be regarded as a significant alternative for solving the problems experienced on a suitable political basis.
5:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Urban mobility transitions are essential to mitigate climate change and improve the quality of life in cities. Cargo bikes (CBs) show promise in replacing motorised vehicles due to their lower carbon intensity, space efficiency, and ability to reduce air and noise pollution. CB sharing relieves users from purchase and maintenance costs. However, it is mainly adopted by individuals with high environmental awareness. Barriers to CB sharing stem from the urban infrastructure, individual mobility choices, and the design of CB sharing organisations (CBSOs). This article analyses upscaling pathways for CB sharing, i.e., increasing their use by a broader audience and reshaping the urban mobility regime. It delivers a comparative case study analysis of two CBSOs: Grätzlrad, Vienna, and LastenVelo e.V., Freiburg. Data was collected through academic and grey literature review and 15 semi-structured interviews with CB sharing stakeholders and experts. The analytical framework is informed by strategic niche management, viewing CB sharing as a niche innovation in the urban mobility regime. The article enhances understanding of CB sharing, the interaction of CBSOs with key actors, and their scalability. CBSOs should increase the availability of shared CBs while reducing the organisational effort required from users. New ways of CB sharing, e.g., integration in shared mobility hubs, should be explored. Municipal actors play a crucial role in upscaling and ensuring that CB sharing reaches a diverse user base. The findings are useful for academia, practitioners and policymakers working with CB sharing and other sustainable urban mobility solutions.
6: This study explores how an inclusive governance of “niche” innovations with family farmers enables or limits the realization of just transitions in family farming at different scales, from the local to the national levels. The research focuses on a case study in the Brunca region of Costa Rica, which has pioneered innovations for bean research with family farmers. The primary source of information for the study was in-depth interviews with relevant stakeholders. Secondary information comes from a desk review of the relevant policies and strategic documents from the relevant authorities. Lastly, a semi-scoping review was conducted to explore gender and intergenerational gaps in plant breeding, as well as potential conflicts between plant breeding and on-farm agro-diversity. The inclusive governance of bean research contributes to the realization of just-transition dimensions of justice, such as recognitional, procedural, and distributional justice, as a result of farmers’ engagement in participatory plant-breeding processes, and due to the coordination between different institutions at the local and national levels. Progress has been made in terms of the recognition and participation of farmers in research and in decision-making locally. The findings show interactions between the local and national scales, in terms of the commercialization of farmers’ seeds. However, the Costa Rican program for bean research struggles to engage family farmers in national decision-making processes and falls short of addressing equality and intergenerational issues. It also faces challenges in reaching a balance between short-term income generation and long-term conservation of agro-biodiversity on the farm. Fostering just transitions in family farming would require a greater inclusion of women and youth by the Costa Rican bean system. This implies allocating resources to increase their capacities and participation in bean research, as well as in decision-making at all levels. This is imperative and could be achieved if the government and relevant stakeholders align their strategic objectives and priorities to shorten gender and intergenerational gaps within the bean production system.</code></pre>
</div>
</div>
</section>
<section id="query-dois-1" class="level2">
<h2 class="anchored" data-anchor-id="query-dois-1">Query DOIs</h2>
<p>Again, if you already had the list of DOIS you are interested in, you can directly query the DOIs and get the accompanying information. However, if I try to feed in all of the DOIs at once I get an error about an overloaded query, so if I wanted to query all of them I would have to break them up and query iteratively. For now, I only query one set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>dois <span class="ot">&lt;-</span> scopus_dt<span class="sc">$</span>DOI[<span class="sc">!</span><span class="fu">is.na</span>(scopus_dt<span class="sc">$</span>DOI)]</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>query <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">'DOI ('</span>, dois[<span class="dv">1</span><span class="sc">:</span>(<span class="fu">length</span>(dois)<span class="sc">/</span><span class="dv">5</span>)], <span class="st">")"</span>, <span class="at">collapse =</span> <span class="st">" OR "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>https://schema.elsevier.com/dtds/document/bkapi/search/SCOPUSSearchTips.htm</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### abstract</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>url<span class="sc">$</span>query <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">apiKey =</span> scopus_key,</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">httpAccept =</span> <span class="st">'application/json'</span>,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">view =</span> <span class="st">'COMPLETE'</span>,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cursor =</span><span class="st">'*'</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#count = count,</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">query =</span> query)</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>qurl <span class="ot">=</span> <span class="fu">url_build</span>(url)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="do">#### for some reason, scopus wants un-encoded * and I'm not sure the fancy way to do that, so just encode above and then use string replace here</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>qurl <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(qurl,<span class="st">"%2A"</span>,<span class="st">"*"</span>)</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>js <span class="ot">=</span> <span class="fu">request</span>(qurl) <span class="sc">%&gt;%</span>  <span class="fu">req_perform</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">resp_body_string</span>() <span class="sc">%&gt;%</span>  jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>()</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>js<span class="sc">$</span><span class="st">`</span><span class="at">search-results</span><span class="st">`</span><span class="sc">$</span><span class="st">`</span><span class="at">opensearch:totalResults</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "37"</code></pre>
</div>
</div>
</section>
</section>
<section id="openalex" class="level1">
<h1>OpenAlex</h1>
<section id="query-by-doi" class="level2">
<h2 class="anchored" data-anchor-id="query-by-doi">Query by DOI</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">#First I can identify the 97 article's works' cited in an open-source database called OpenAlex.</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>my_email <span class="ot">&lt;-</span> <span class="st">'belwood@ucdavis.edu'</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>works_base <span class="ot">=</span> <span class="st">'https://api.openalex.org/works'</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>oa_dt <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Few enough that we can just loop through</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(dois)){</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i <span class="sc">%in%</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">30</span>, <span class="fu">length</span>(dois), <span class="at">by =</span> <span class="dv">30</span>))){ <span class="fu">Sys.sleep</span>(<span class="dv">8</span>)}</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  qurl <span class="ot">&lt;-</span> <span class="fu">paste0</span>(works_base,<span class="st">'?filter=doi:'</span>,dois[i],<span class="st">'&amp;mailto='</span>,my_email)</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>  qurl <span class="ot">&lt;-</span> <span class="fu">URLencode</span>(qurl)</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  req <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(qurl)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  resp <span class="ot">&lt;-</span> req <span class="sc">%&gt;%</span>  <span class="fu">req_perform</span>() <span class="sc">%&gt;%</span>  <span class="fu">resp_body_json</span>()</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(resp<span class="sc">$</span>results) <span class="sc">==</span> <span class="dv">0</span>){ </span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>    id_dt <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">'id'</span> <span class="ot">=</span> <span class="cn">NA</span>, <span class="st">'doi'</span> <span class="ot">=</span> dois[i], <span class="at">inv_abs =</span> <span class="cn">NA</span>)</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>     id_dt <span class="ot">=</span> <span class="fu">rbindlist</span>(<span class="fu">lapply</span>(resp<span class="sc">$</span>results, <span class="cf">function</span>(x) </span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>               <span class="fu">as.data.table</span>(x[<span class="fu">c</span>(<span class="st">'id'</span>, <span class="st">'doi'</span>)])))</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>     inv_abs <span class="ot">&lt;-</span> resp<span class="sc">$</span>results[[<span class="dv">1</span>]]<span class="sc">$</span>abstract_inverted_index</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>     <span class="cf">if</span>(<span class="fu">is.null</span>(inv_abs)){</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>       inv_abs <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>     }</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>  id_dt <span class="ot">&lt;-</span> <span class="fu">unique</span>(id_dt)</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>  id_dt<span class="sc">$</span>inv_abs <span class="ot">&lt;-</span> <span class="fu">list</span>(inv_abs)</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>  oa_dt <span class="ot">&lt;-</span> <span class="fu">rbind</span>(oa_dt, id_dt)</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>unpack_abstract <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(x) <span class="sc">!=</span> <span class="dv">0</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(x)){</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    vec <span class="ot">&lt;-</span> <span class="fu">unlist</span>(x)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">'word'</span> <span class="ot">=</span> <span class="fu">names</span>(vec), <span class="st">'location'</span> <span class="ot">=</span> vec)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> df[<span class="fu">order</span>(df<span class="sc">$</span>location),]</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    abs <span class="ot">&lt;-</span> <span class="fu">paste</span>(df<span class="sc">$</span>word, <span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    abs <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(abs, <span class="st">'(?&lt;=</span><span class="sc">\\</span><span class="st">w)</span><span class="sc">\\</span><span class="st">d'</span>)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    abs <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(abs)</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>oa_dt<span class="sc">$</span>abstract <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(oa_dt)){</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>  oa_dt<span class="sc">$</span>abstract[i] <span class="ot">&lt;-</span> <span class="fu">unpack_abstract</span>(oa_dt<span class="sc">$</span>inv_abs[i])</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(oa_dt<span class="sc">$</span>abstract)) <span class="co"># OA is inferior on the abstract front </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
FALSE  TRUE 
  104    83 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(scopus_dt<span class="sc">$</span>ABSTRACT)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
FALSE 
  194 </code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>